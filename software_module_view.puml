@startuml Software_Architecture_Module_View

skinparam packageStyle rectangle
skinparam component {
    BackgroundColor #E8F5E9
    BorderColor #43A047
    FontSize 10
}

skinparam package {
    BackgroundColor #FFF3E0
    BorderColor #FF6F00
    FontStyle bold
}

title Software Architecture - Structure Module View (Maxfit+)

package "Presentation Layer" {
    component "Member\nDashboard View" as MemberView
    component "Class Scheduling\nView" as ClassView
    component "Payment\nView" as PaymentView
    component "Reports\nDashboard View" as ReportView
    component "Staff\nDashboard View" as StaffView
    component "Admin\nDashboard View" as AdminView
}

package "Controller Layer" {
    component "MembersController\n[CRUD, Profile,\nRegistration]" as MemberCtrl
    component "CourseSessionsController\n[Schedule, Conflicts,\nRegistrations]" as ClassCtrl
    component "PaymentsController\n[Process, Track,\nReceipts]" as PaymentCtrl
    component "HomeController\n[Dashboard, Statistics,\nReports]" as HomeCtrl
    component "StaffController\n[Management,\nSchedules]" as StaffCtrl
    component "CheckInsController\n[Attendance,\nTracking]" as CheckInCtrl
}

package "Service Layer" {
    component "Member Service\n[Business Logic,\nValidation]" as MemberSvc
    component "Class Scheduling Service\n[Conflict Detection,\nCapacity Check]" as ClassSvc
    component "Payment Service\n[Transaction Processing,\nValidation]" as PaymentSvc
    component "Attendance Service\n[Check-in/out,\nAnalytics]" as AttendanceSvc
    component "Staff Service\n[Staff Management,\nWork Schedules]" as StaffSvc
    component "Report Service\n[Revenue Analytics,\nStatistics]" as ReportSvc
}

package "Data Access Layer" {
    component "Member Repository\n[EF Core,\nLINQ Queries]" as MemberRepo
    component "Class Repository\n[Session Data,\nCourse Info]" as ClassRepo
    component "Payment Repository\n[Transaction Records,\nFinancial Data]" as PaymentRepo
    component "CheckIn Repository\n[Attendance Records,\nUsage Data]" as CheckInRepo
    component "Staff Repository\n[Staff Data,\nSchedules]" as StaffRepo
}

package "Data Layer" {
    database "SQL Server\n[MaxFit DB]" as DB
    component "File Storage\n[Profile Photos,\nDocuments]" as FileStore
}

' Presentation to Controller
MemberView -down-> MemberCtrl
ClassView -down-> ClassCtrl
PaymentView -down-> PaymentCtrl
ReportView -down-> HomeCtrl
StaffView -down-> StaffCtrl
AdminView -down-> HomeCtrl

' Controller to Service
MemberCtrl -down-> MemberSvc
ClassCtrl -down-> ClassSvc
PaymentCtrl -down-> PaymentSvc
HomeCtrl -down-> ReportSvc
StaffCtrl -down-> StaffSvc
CheckInCtrl -down-> AttendanceSvc

' Service to Repository
MemberSvc -down-> MemberRepo
ClassSvc -down-> ClassRepo
PaymentSvc -down-> PaymentRepo
AttendanceSvc -down-> CheckInRepo
StaffSvc -down-> StaffRepo
ReportSvc -down-> MemberRepo
ReportSvc -down-> PaymentRepo

' Repository to Data
MemberRepo -down-> DB
ClassRepo -down-> DB
PaymentRepo -down-> DB
CheckInRepo -down-> DB
StaffRepo -down-> DB

' File Storage
MemberRepo -down-> FileStore

note right of MemberSvc
  - Member registration
  - Profile validation
  - Membership management
end note

note right of ClassSvc
  - Conflict detection
  - Capacity checking
  - Trainer/room assignment
end note

note right of PaymentSvc
  - Multi-method support
  - Transaction validation
  - Receipt generation
end note

@enduml
