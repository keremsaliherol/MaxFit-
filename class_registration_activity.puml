@startuml Class_Registration_Activity_Diagram

skinparam activityBorderColor #43A047
skinparam activityBackgroundColor #E8F5E9
skinparam activityDiamondBorderColor #FF6F00
skinparam activityDiamondBackgroundColor #FFF3E0

title Class Registration - Activity Diagram (Maxfit+)

start

:Member logs into system;

:Navigate to "Available Classes" page;

:View class schedule with filters
(Class Type, Date, Trainer, Time);

:Select desired class session;

:Display class details
(Trainer, Room, Time, Capacity);

if (Member already registered?) then (yes)
  :Show message
  "Already registered for this class";
  stop
else (no)
  :Continue;
endif

if (Class capacity available?) then (yes)
  :Continue;
else (no)
  :Add to waiting list option;
  if (Join waiting list?) then (yes)
    :Add member to waiting list;
    :Send notification when spot available;
    stop
  else (no)
    :Return to class selection;
    stop
  endif
endif

if (Time conflict with other classes?) then (yes)
  :Show conflict warning message;
  if (Continue anyway?) then (no)
    :Return to class selection;
    stop
  else (yes)
    :Continue with warning;
  endif
else (no)
  :Continue;
endif

:Confirm class registration;

fork
  :Create CourseRegistration record
  (Member ID, Session ID, Status = "Confirmed");
fork again
  :Update session capacity
  (Decrement available spots);
fork again
  :Send confirmation email to member;
  note right
    Email contains:
    - Class name and type
    - Trainer name
    - Date and time
    - Room location
    - Reminder to arrive 10 min early
  end note
end fork

:Display success message
"Registration successful";

:Show registered classes list;

:Update member dashboard
with upcoming classes;

stop

@enduml
